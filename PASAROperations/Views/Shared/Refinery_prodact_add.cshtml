@model IEnumerable<PASAROperations.Models.REFTH_PP_Actcode>

<div class="rpp_ref_act_div">
    <div id="ref_prodact_rightdiv">
        <h6>Activities</h6>
        List of activities.
          
       <table id="act_code_table">
           <tr id="act_code_table_header">
               <th><i>Code</i></th>
               <th><i>Description</i></th>
           </tr>
           @foreach (var item in Model)
           { 
               <tr>
                   <td class="ref_code_td"@* disabled="disabled"*@>@Html.ValueFor(modelItem => item.REFTH_ActCode)</td>
                   <td class="ref_code_desc_td"@*disabled="disabled"*@>@Html.ValueFor(modelItem => item.REFTH_ActCodeDesc)</td>
                   @* <td class="fsfe_charge">@Html.ValueFor(modelItem => item.FSFE_Charge)</td>
                    <td class="cf_charge">@Html.ValueFor(modelItem => item.CF_Charge)</td>
                    <td class="af_charge">@Html.ValueFor(modelItem => item.AF_Charge)</td>*@
               </tr> 
             
           }
       </table>

        <table style="padding-left: 212px;">
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td class="border_color">
                    <input type="button" value="Save" onclick="add_ref_prodact()" id="btn_prod" /></td>
            </tr>
        </table>
    </div>

    <table class="refinery_partial_tbl">

        <tr>
            <td rowspan="2" class="label_datetype">Start Time:</td>
            <td class="label_date">Date</td>
            <td class="label_date">Time (hh:mm)</td>
        </tr>

        <tr>
            <td class="af_date_td ">
                <input @*disabled="disabled"*@id="start_date_ref_add_act" class="ref_date" type="text" value="@ViewBag.RefStartTime.ToString("MM/dd/yyyy")" onchange="validation_ref_prodact_add()"/></td>
            <td class="af_time_td">
                <select id="start_time_hr_ref_add_act" class="ref_hr" @*disabled="disabled"*@ onchange="validation_ref_prodact_add()">
                    @{
                        int hr;
                        int min_ = Int32.Parse(ViewBag.RefStartTime.ToString("mm"));
                        if (min_ == 60)
                        {

                            hr = Int32.Parse(ViewBag.RefStartTime.ToString("HH"));

                        }
                        else
                        {
                            hr = Int32.Parse(ViewBag.RefStartTime.ToString("HH"));
                        }


                        for (int x = 0; x <= 23; x++)
                        {
                            if (@x <= 9)
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@("0" + @x)</option> }
                                else
                                { <option value="@x">@("0" + @x)</option> }
                            }


                            else
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@x</option> }
                                else
                                { <option value="@x">@x</option> }


                            }
                        }
                    }

                </select>&nbsp;:
            <select id="start_time_min_ref_add_act" class="ref_min" @*disabled="disabled"*@ onchange="validation_ref_prodact_add()">
                @{
                    int min = Int32.Parse(ViewBag.RefStartTime.ToString("mm"));


                    for (int x = 0; x <= 59; x++)
                    {
                        if (@x <= 9)
                        {

                            if (@x == @min)
                            {  <option value="@x" selected="selected">@("0" + @x)</option> }
                            else
                            { <option value="@x">@("0" + @x)</option> }
                        }


                        else
                        {

                            if (@x == @min)
                            {  <option value="@x" selected="selected">@x</option> }
                            else
                            { <option value="@x">@x</option> }


                        }
                    }
                }
            </select>

            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td rowspan="2" class="label_datetype">End Time:</td>

        </tr>

        <tr>
            <td class="af_date_td ">
                <input id="end_date_ref_add_act" class="ref_date" type="text"  value="@ViewBag.RefStartTime.ToString("MM/dd/yyyy")" onchange="validation_ref_prodact_add()"/></td>


            <td class="af_time_td">
                <select id="end_time_hr_ref_add_act" class="ref_hr" onchange="validation_ref_prodact_add()">
                    @{
               
  
                        if (min_ == 60)
                        {

                            hr = Int32.Parse(ViewBag.RefStartTime.ToString("HH"));

                        }
                        else
                        {
                            hr = Int32.Parse(ViewBag.RefStartTime.ToString("HH"));
                        }


                        for (int x = 0; x <= 23; x++)
                        {
                            if (@x <= 9)
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@("0" + @x)</option> }
                                else
                                { <option value="@x">@("0" + @x)</option> }
                            }


                            else
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@x</option> }
                                else
                                { <option value="@x">@x</option> }


                            }
                        }
                    }

                </select>&nbsp;:
            <select id="end_time_min_ref_add_act" class="ref_min" onchange="validation_ref_prodact_add()">
                @{
                    int mine_ = Int32.Parse(ViewBag.RefStartTime.ToString("mm")) + 1;

                    for (int x = 0; x <= 59; x++)
                    {
                        if (@x <= 9)
                        {

                            if (@x == @mine_)
                            {  <option value="@x" selected="selected">@("0" + @x)</option> }
                            else
                            { <option value="@x">@("0" + @x)</option> }
                        }


                        else
                        {

                            if (@x == @mine_)
                            {  <option value="@x" selected="selected">@x</option> }
                            else
                            { <option value="@x">@x</option> }


                        }
                    }
                }
            </select>

            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td class="label_datetype">Block:</td>
            <td class="border_color">
                @Html.DropDownList("blockid", (SelectList)ViewBag.blockpairlist, "--Select--")
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td class="label_datetype">Activity Code:</td>
            <td class="border_color">
                <input class="extratbl_input border_color" type="text" id="REFTH_PP_Actcode" style="text-transform: uppercase" />
            </td>
        </tr>
    </table>
    <div>

        <span class="label_datetype">Description:</span>
        <br>
        <br>
        <span id="REFTH_ActCodeDesc" class="bold_text_ref"></span>
        <br>
        <br>
        <textarea class="border_color" id="ref_prodact_note" placeholder="Remarks..."></textarea>
        <br>
        <br>
        <span id="error_msg_time_ref"></span>
    </div>

    <span id="REFTH_PP_Actcode_Id" style="visibility: hidden;"></span>

</div>

<script type="text/javascript">
    $(document).ready(function () {
        $(function () {
            $("#Dialog_prod_add_activity #start_date_ref_add_act").datepicker({
                showOn: 'button',
                buttonText: 'Show Date',
                buttonImageOnly: true,
                buttonImage: serverpath + '/Images/calendar.png',
                dateFormat: 'mm/dd/yy',
                constrainInput: false
            });
            $(".ui-datepicker-trigger").mouseover(function () {
                $(this).css('cursor', 'pointer');

            });

            $("#Dialog_prod_add_activity #end_date_ref_add_act").datepicker({
                showOn: 'button',
                buttonText: 'Show Date',
                buttonImageOnly: true,
                buttonImage: serverpath + '/Images/calendar.png',
                dateFormat: 'mm/dd/yy',
                constrainInput: true
            });
            $(".ui-datepicker-trigger").mouseover(function () {
                $(this).css('cursor', 'pointer');

            });
        });

    });

    $("#Dialog_prod_add_activity #REFTH_PP_Actcode").on('keyup', function () {
        upperCase_actcode(this);
        var actcode_val = $(this).val();
        Refinery_ActivityCode(actcode_val, "#Dialog_prod_add_activity");
    });
</script>
