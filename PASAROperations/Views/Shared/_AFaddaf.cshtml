@*@{
    ViewBag.Title = "_AFaddaf";
}*@

@model IEnumerable<PASAROperations.Models.AF_ActivityCode>
<div id="add_afblister_div">

    <input type="text" class="timelogid" value="@ViewBag.AF_TimeLogId" style="overflow:hidden;display:none;" />
    <input type="text" id="cv_num" style="overflow: hidden; display: none;" />
    <input type="text" id="cycle_num" style="overflow: hidden; display: none;" />
    <b>AF Activity Form</b>
    <br />
    <br />
    <h6 style="float: right;"></h6>
    <div id="addactaf_rightdiv">
        <h6>Activities</h6>
        List of activities.
          
       <table id="act_code_table">
           <tr id="act_code_table_header">
               <th><i>Code</i></th>
               <th><i>Description</i></th>
           </tr>
           @foreach (var item in Model)
           { 
               <tr>
                   <td class="act_code_td"@* disabled="disabled"*@>@Html.ValueFor(modelItem => item.AF_ActivityCodeName)</td>
                   <td class="act_code_desc_td_afcast" @*disabled="disabled"*@>@Html.ValueFor(modelItem => item.AF_ActivityDesc)</td>
                   @* <td class="fsfe_charge">@Html.ValueFor(modelItem => item.FSFE_Charge)</td>
                    <td class="cf_charge">@Html.ValueFor(modelItem => item.CF_Charge)</td>
                    <td class="af_charge">@Html.ValueFor(modelItem => item.AF_Charge)</td>*@
               </tr> 
           }
       </table>

    </div>

    <table class="af_time_table">
        <tr>
            <td rowspan="2" class="label_datetype">Start Time : &nbsp;</td>
            <td class="label_date">Date</td>
            <td class="label_date">Time (hh:mm)</td>
        </tr>

        <tr>
            <td class="af_date_td">
                <input id="start_date_input" type="text"  value="@ViewBag.LotStartTime.ToString("MM/dd/yyy")"/></td>
            <td class="af_time_td">

                <select id="start_time_hr_input" class="grey_bg">
                    @{
                        int hr;
                        int min_ = Int32.Parse(ViewBag.LotStartTime.ToString("mm"));
                        if (min_ == 60)
                        {

                            hr = Int32.Parse(ViewBag.LotStartTime.ToString("HH"));

                        }
                        else
                        {
                            hr = Int32.Parse(ViewBag.LotStartTime.ToString("HH"));
                        }


                        for (int x = 0; x <= 23; x++)
                        {
                            if (@x <= 9)
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@("0" + @x)</option> }
                                else
                                { <option value="@x">@("0" + @x)</option> }
                            }


                            else
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@x</option> }
                                else
                                { <option value="@x">@x</option> }


                            }
                        }
                    }

                </select>&nbsp;:

            <select id="start_time_min_input" class="grey_bg">
                @{
                    int min = Int32.Parse(ViewBag.LotStartTime.ToString("mm"));


                    for (int x = 0; x <= 59; x++)
                    {
                        if (@x <= 9)
                        {

                            if (@x == @min)
                            {  <option value="@x" selected="selected">@("0" + @x)</option> }
                            else
                            { <option value="@x">@("0" + @x)</option> }
                        }


                        else
                        {

                            if (@x == @min)
                            {  <option value="@x" selected="selected">@x</option> }
                            else
                            { <option value="@x">@x</option> }


                        }
                    }
                }
            </select>

            </td>
        </tr>
    </table>

    <table id="end_time_table">
        <tr>
            <td rowspan="2" class="label_datetype">End Time : &nbsp;&nbsp;</td>

        </tr>

        <tr>
            <td class="af_date_td">
                <input id="end_date_input" type="text"  value="@ViewBag.LotStartTime.ToString("MM/dd/yyyy")"/></td>


            <td class="af_time_td">
                <select id="end_time_hr_input">
                    @{
              
  
                        if (min_ == 60)
                        {

                            hr = Int32.Parse(ViewBag.LotStartTime.ToString("HH"));

                        }
                        else
                        {
                            hr = Int32.Parse(ViewBag.LotStartTime.ToString("HH"));
                        }


                        for (int x = 0; x <= 23; x++)
                        {
                            if (@x <= 9)
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@("0" + @x)</option> }
                                else
                                { <option value="@x">@("0" + @x)</option> }
                            }


                            else
                            {

                                if (@x == @hr)
                                {  <option value="@x" selected="selected">@x</option> }
                                else
                                { <option value="@x">@x</option> }


                            }
                        }
                    }

                </select>&nbsp;:
            <select id="end_time_min_input">
                @{
                    int mine_ = Int32.Parse(ViewBag.LotStartTime.ToString("mm")) + 1;

                    for (int x = 0; x <= 59; x++)
                    {
                        if (@x <= 9)
                        {

                            if (@x == @mine_)
                            {  <option value="@x" selected="selected">@("0" + @x)</option> }
                            else
                            { <option value="@x">@("0" + @x)</option> }
                        }


                        else
                        {

                            if (@x == @mine_)
                            {  <option value="@x" selected="selected">@x</option> }
                            else
                            { <option value="@x">@x</option> }


                        }
                    }
                }
            </select>

            </td>
        </tr>
    </table>

    <br />
    <div class="add_af_actcode_id hidden_div"></div>
    <div>Activity Code:
        <input class="act_add_code_input" id="af_actcode" type="text" maxlength="4" placeholder="-" autofocus="autofocus" /></div>
    <br>
    Activity Description:
    <d id="Act_Desc_div">-</d>


    <br />
    <br />
    Duration:
    <d id="the_dur">-</d>

    <br />
    <br />
    <table id="addact_charge_table">
        <tr>
            <td class="label_charge">Converter No.: </td>
            @* <td><input class="cf_charge_input" type="text" id="afparam_1585"  value=""  placeholder="-" disabled="disabled" /></td>*@
            <td>@Html.DropDownList("afparam_1585", (SelectList)ViewBag.cv_list, "-", new { @disabled = "disabled", @class = "cf_charge_input" })</td>
            <td>&nbsp;&nbsp;Sulfur, ppm: &nbsp;&nbsp;</td>
            <td>
                <input type="text" class="sulfur_input" id="afparam_1587" placeholder="-" /></td>
            @* <td><span id="afparam_1584" class="sulfur_input">-</span></td>*@
        </tr>
        <tr>
            <td class="label_charge">Cycle No: </td>
            @* <td><input class="fsfe_charge_input" id="afparam_1587"  type="text" value="" placeholder="-" disabled="disabled" /></td>*@
            <td>
                <select id="afparam_1586" disabled="disabled" class="fsfe_charge_input">
                    <option>-</option>
                </select>

            </td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td class="label_charge">Weight: </td>
            <td>
                <input class="af_weight_input" id="afparam_1584" type="text" value="" placeholder="-" disabled="disabled" /></td>
            <td></td>
            <td></td>
        </tr>

        <tr>
            <td class="label_charge">Temperature: </td>
            <td>
                <input class="af_temp_input" id="afparam_1588" type="text" value="" placeholder="-" /></td>
            <td></td>
            <td></td>
        </tr>

    </table>
    <div>Remarks:
        <textarea class="border_color" id="af_remarks" placeholder="-" /></div>
    <br />
    <br />
    <br />
    <br />


    <input id="add_af_ok_btn" type="button" value="Add Activity" />
    <br />
    <br />
    <span id="error_msg_time_pc"></span>
    <span id="error_code"></span>
    <br />
    <br />

</div>

<script type="text/javascript">
    $(document).ready(function () {

        load_AF_Act();

        $("#afparam_1585").on
             ("change", function () {

                 $('#afparam_1587').attr('value', '-');


             });

        $("#end_date_input").datepicker({
            showOn: 'button',
            buttonText: 'Show Date',
            buttonImageOnly: true,
            buttonImage: serverpath + '/Images/calendar.png',
            dateFormat: 'mm/dd/yy',
            constrainInput: true
        });

        $(".ui-datepicker-trigger").mouseover(function () {
            $(this).css('cursor', 'pointer');

        });

        $("#start_date_input").datepicker({
            showOn: 'button',
            buttonText: 'Show Date',
            buttonImageOnly: true,
            buttonImage: serverpath + '/Images/calendar.png',
            dateFormat: 'mm/dd/yy',
            constrainInput: true
        });

        $(".ui-datepicker-trigger").mouseover(function () {
            $(this).css('cursor', 'pointer');

        });

        validation_perbtn_af();

    });


</script>




